\doxysection{database.\+h}
\hypertarget{database_8h_source}{}\label{database_8h_source}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#ifndef\ DATABASE\_H}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#define\ DATABASE\_H}}
\DoxyCodeLine{00003\ }
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <QObject>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <QSqlDatabase>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <QSqlQuery>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <QSqlError>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <QJsonObject>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <QJsonArray>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <QCryptographicHash>}}
\DoxyCodeLine{00011\ \textcolor{preprocessor}{\#include\ <QCoreApplication>}}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00024\ \textcolor{keyword}{class\ }DatabaseManager\ :\ \textcolor{keyword}{public}\ QObject}
\DoxyCodeLine{00025\ \{}
\DoxyCodeLine{00026\ \ \ \ \ Q\_OBJECT}
\DoxyCodeLine{00027\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \ \ \textcolor{keyword}{static}\ DatabaseManager\&\ \mbox{\hyperlink{class_database_manager_a4abb527066e28f3928ef45af856e134c}{instance}}();}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_database_manager_a3cbc0c691ef2b9e7851a33959817dee6}{connect}}();}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00046\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_database_manager_aa4191649a436b20af9d2151e141ee148}{isConnected}}()\ \textcolor{keyword}{const};}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00057\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_database_manager_a510a374b1af52a5884da5d5841f78906}{registerUser}}(\textcolor{keyword}{const}\ QString\ \&username,\ \textcolor{keyword}{const}\ QString\ \&password,\ \textcolor{keyword}{const}\ QString\ \&email\ =\ \textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00072\ \ \ \ \ QJsonObject\ \mbox{\hyperlink{class_database_manager_a42d1f36765b1a6fedffbece2d0143009}{authenticateUser}}(\textcolor{keyword}{const}\ QString\ \&username,\ \textcolor{keyword}{const}\ QString\ \&password);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00079\ \ \ \ \ QJsonObject\ \mbox{\hyperlink{class_database_manager_a7ec65dd93603e103657ca40f1cd69dc0}{getUserById}}(\textcolor{keywordtype}{int}\ userId);}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00086\ \ \ \ \ QJsonObject\ \mbox{\hyperlink{class_database_manager_a4aa110527206a1efbc51d1456cbe51ea}{getUserByUsername}}(\textcolor{keyword}{const}\ QString\ \&username);}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{comment}{//\ Работа\ с\ сообщениями}}
\DoxyCodeLine{00096\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_database_manager_a4ec1070ffe5d42b7215db8f2ea335a51}{sendMessage}}(\textcolor{keywordtype}{int}\ senderId,\ \textcolor{keywordtype}{int}\ receiverId,\ \textcolor{keyword}{const}\ QString\ \&content);}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00104\ \ \ \ \ QJsonArray\ \mbox{\hyperlink{class_database_manager_a554a7487da54b3c5a4dad2af167a5f0e}{getUserMessages}}(\textcolor{keywordtype}{int}\ userId,\ \textcolor{keywordtype}{int}\ limit\ =\ 50);}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00111\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_database_manager_a38ab42b522a0f826c6c2fc9e22cb0b8b}{markMessageAsRead}}(\textcolor{keywordtype}{int}\ messageId);}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_database_manager_aa3c02205a9ddce62e9f5b904375a2112}{initDatabaseSchema}}();}
\DoxyCodeLine{00119\ }
\DoxyCodeLine{00125\ \ \ \ \ QJsonArray\ \mbox{\hyperlink{class_database_manager_a24a0a309990142d639a6429e4a18eaf2}{getUserContacts}}(\textcolor{keywordtype}{int}\ userId);}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{class_database_manager_aaa65a69d209e20b4b8464418d610eb4f}{addContact}}(\textcolor{keywordtype}{int}\ userId,\ \textcolor{keywordtype}{int}\ contactId);}
\DoxyCodeLine{00134\ }
\DoxyCodeLine{00142\ \ \ \ \ QJsonArray\ \mbox{\hyperlink{class_database_manager_aedb854056fd7a83c58ab19b61c41195a}{getChatMessages}}(\textcolor{keywordtype}{int}\ user1,\ \textcolor{keywordtype}{int}\ user2,\ \textcolor{keywordtype}{int}\ limit\ =\ 100);}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keyword}{explicit}\ DatabaseManager(QObject\ *parent\ =\ \textcolor{keyword}{nullptr});}
\DoxyCodeLine{00150\ }
\DoxyCodeLine{00152\ \ \ \ \ \string~DatabaseManager();}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00159\ \ \ \ \ QString\ hashPassword(\textcolor{keyword}{const}\ QString\ \&password);}
\DoxyCodeLine{00160\ }
\DoxyCodeLine{00161\ \ \ \ \ QSqlDatabase\ m\_db;\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00162\ \ \ \ \ \textcolor{keyword}{static}\ DatabaseManager*\ m\_instance;\ }
\DoxyCodeLine{00163\ \};}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ DATABASE\_H}}

\end{DoxyCode}
