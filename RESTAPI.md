
# YAChat REST API

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ

YAChat Server –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π REST API, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ JSON –∏ —Å–∞–º–æ–ø–∏—Å–Ω–æ–º HTTP-–ø–æ–¥–æ–±–Ω–æ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–µ. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π HTTP-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω –ø–æ REST-–ø—Ä–∏–Ω—Ü–∏–ø–∞–º.

---

## üß≠ –°–ø–∏—Å–æ–∫ –º–µ—Ç–æ–¥–æ–≤

### üìù `POST /register`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "username": "alice",
  "password": "secret",
  "email": "alice@example.com"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "type": "register",
  "success": true
}
```

**–û—à–∏–±–∫–∞:**
```json
{
  "type": "register",
  "success": false,
  "error": "Registration failed"
}
```

---

### üîë `POST /login`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ email –∏ –ø–∞—Ä–æ–ª—é.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "email": "alice@example.com",
  "password": "secret"
}
```

**–û—Ç–≤–µ—Ç (—É—Å–ø–µ—Ö):**
```json
{
  "type": "login",
  "id": 1,
  "username": "alice",
  "email": "alice@example.com",
  "token": "abc123xyz"
}
```

**–û—à–∏–±–∫–∞:**
```json
{
  "type": "login",
  "error": "Authentication failed"
}
```

---

### üë• `GET /contacts?user_id=1`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û—Ç–≤–µ—Ç:**
```json
{
  "type": "contacts",
  "contacts": [
    {
      "id": 2,
      "username": "bob",
      "email": "bob@example.com"
    }
  ]
}
```

---

### ‚ûï `POST /contacts`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç –≤ —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "user_id": 1,
  "contact_id": 2
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "type": "contacts_add",
  "success": true
}
```

---

### ‚úâÔ∏è `POST /messages`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "sender_id": 1,
  "receiver_id": 2,
  "content": "–ü—Ä–∏–≤–µ—Ç!"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "type": "messages_send",
  "success": true
}
```

---

### üì© `GET /messages?user1_id=1&user2_id=2&limit=100`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É –¥–≤—É–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏.

**–û—Ç–≤–µ—Ç:**
```json
{
  "type": "messages",
  "messages": [
    {
      "id": 1,
      "sender_id": 1,
      "receiver_id": 2,
      "content": "–ü—Ä–∏–≤–µ—Ç!",
      "timestamp": "2025-04-04T12:00:00"
    }
  ]
}
```

---

### üîç `GET /users?username=alice`

–∏–ª–∏

### üîç `GET /users?id=1`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∏–º–µ–Ω–∏ –∏–ª–∏ ID.

**–û—Ç–≤–µ—Ç (—É—Å–ø–µ—Ö):**
```json
{
  "type": "user_search",
  "success": true,
  "id": 1,
  "username": "alice",
  "email": "alice@example.com"
}
```

**–û—Ç–≤–µ—Ç (–Ω–µ –Ω–∞–π–¥–µ–Ω):**
```json
{
  "type": "user_search",
  "success": false
}
```

---

## ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã ‚Äî –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ `Content-Type: application/json` –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω.
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ `HTTP/1.1 200 OK`, –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ (–æ—à–∏–±–∫–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ JSON).
- –°–µ—Ä–≤–µ—Ä –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π HTTP-–¥–≤–∏–∂–æ–∫ ‚Äî —Ä–∞–∑–±–æ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤—Ä—É—á–Ω—É—é.
